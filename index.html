<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eye Monitor Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        /* 全局字体设置 */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Microsoft YaHei", sans-serif; }

        /* 自定义滚动条 (macOS 风格) */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 99px; }
        ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }

        /* macOS 窗口阴影 */
        .window-shadow {
            box-shadow: 0 0 0 1px rgba(0,0,0,0.05), 0 20px 50px -12px rgba(0,0,0,0.3);
        }

        /* iOS 风格 Toggle Switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #10b981; /* Emerald-500 */
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #10b981;
        }
        .toggle-checkbox {
            right: 0;
            z-index: 10;
            border-radius: 9999px;
            width: 1.25rem; /* 20px */
            height: 1.25rem;
            background-color: white;
            border-width: 1px;
            transition: all 0.2s ease-in-out;
            position: absolute;
            top: 2px;
            left: 2px;
            appearance: none;
            cursor: pointer;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        .toggle-checkbox:checked {
            left: calc(100% - 1.25rem - 2px);
            border-color: white;
        }
        .toggle-label {
            width: 2.75rem; /* 44px */
            height: 1.5rem; /* 24px */
            background-color: #e5e7eb;
            border-radius: 9999px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }

        /* PRO 标签样式 */
        .badge-pro {
            background-color: #fce7f3;
            color: #db2777;
            font-size: 0.65rem;
            padding: 1px 6px;
            border-radius: 4px;
            font-weight: 600;
            margin-left: 6px;
            vertical-align: middle;
        }
        
        /* 侧边栏选中态 */
        .nav-item.active {
            background-color: #1f2937; /* Gray-800 */
            color: white;
        }
        .nav-item.active i {
            color: white;
        }
    </style>
</head>
<body class="bg-gray-200 h-screen flex items-center justify-center overflow-hidden">

    <main class="window-shadow bg-white w-[1000px] h-[700px] rounded-xl flex overflow-hidden">
        
        <aside class="w-60 bg-gray-50 flex flex-col border-r border-gray-200 py-6 px-3 select-none">
            <div class="flex space-x-2 px-2 mb-6">
                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                <div class="w-3 h-3 rounded-full bg-green-500"></div>
            </div>

            <nav class="space-y-1">
                <button onclick="switchTab('today')" id="nav-today" class="nav-item w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-200 transition-colors active">
                    <i class="ph ph-sun text-lg mr-3 text-gray-500"></i>
                    今日
                </button>
                <button onclick="switchTab('analysis')" id="nav-analysis" class="nav-item w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-200 transition-colors">
                    <i class="ph ph-chart-bar text-lg mr-3 text-gray-500"></i>
                    分析
                </button>
                <div class="h-4"></div> <button onclick="switchTab('rules')" id="nav-rules" class="nav-item w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-200 transition-colors">
                    <i class="ph ph-clock text-lg mr-3 text-gray-500"></i>
                    规则
                </button>
                <button onclick="switchTab('accuracy')" id="nav-accuracy" class="nav-item w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-200 transition-colors">
                    <i class="ph ph-crosshair text-lg mr-3 text-gray-500"></i>
                    准确性
                </button>
                <button onclick="switchTab('settings')" id="nav-settings" class="nav-item w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-200 transition-colors">
                    <i class="ph ph-gear text-lg mr-3 text-gray-500"></i>
                    设置
                </button>
            </nav>
        </aside>

        <section class="flex-1 bg-white overflow-y-auto relative">
            
            <div id="view-today" class="view-section p-8 space-y-8 animate-fade-in">
                <div class="grid grid-cols-2 gap-6">
                    <div class="border border-gray-200 rounded-2xl p-6 relative shadow-sm hover:shadow-md transition-shadow">
                        <div class="flex items-center text-gray-500 text-sm mb-1">
                            疲劳值 <i class="ph ph-info ml-1 cursor-help"></i>
                        </div>
                        <div class="text-4xl font-bold text-gray-800">0%</div>
                    </div>
                    <div class="border border-gray-200 rounded-2xl p-6 relative shadow-sm hover:shadow-md transition-shadow">
                        <div class="flex items-center text-gray-500 text-sm mb-1">
                            今日时长
                        </div>
                        <div class="flex items-baseline space-x-2">
                            <span class="text-4xl font-bold text-gray-800">0</span>
                            <span class="text-lg text-gray-500">小时</span>
                            <span class="text-4xl font-bold text-gray-800">1</span>
                            <span class="text-lg text-gray-500">分</span>
                        </div>
                    </div>
                </div>

                <div>
                    <h2 class="text-lg font-bold text-gray-800 mb-4">今日使用</h2>
                    <div class="h-64 w-full">
                        <canvas id="chart-today"></canvas>
                    </div>
                </div>
            </div>

            <div id="view-analysis" class="view-section hidden p-8 space-y-6">
                <div class="flex justify-center space-x-4 mb-8">
                    <div class="bg-gray-100 p-1 rounded-lg inline-flex">
                        <button class="px-3 py-1 text-sm font-medium text-gray-900 bg-white shadow rounded-md">过去7天</button>
                        <button class="px-3 py-1 text-sm font-medium text-gray-500 hover:text-gray-900">过去28天</button>
                        <button class="px-3 py-1 text-sm font-medium text-gray-500 hover:text-gray-900">过去90天</button>
                    </div>
                    <div class="bg-gray-100 p-1 rounded-lg inline-flex">
                        <button class="px-3 py-1 text-sm font-medium text-gray-900 bg-white shadow rounded-md">按天</button>
                        <button class="px-3 py-1 text-sm font-medium text-gray-500 hover:text-gray-900">按周</button>
                    </div>
                </div>

                <div>
                    <div class="flex items-center text-gray-600 mb-2">
                        <span class="font-bold mr-1">使用时长</span> <i class="ph ph-info"></i>
                    </div>
                    <div class="h-64 w-full border border-dashed border-gray-200 rounded-xl p-2">
                        <canvas id="chart-analysis"></canvas>
                    </div>
                </div>
                
                 <div>
                    <div class="flex items-center text-gray-600 mb-2">
                        <span class="font-bold mr-1">疲劳峰值时长</span> <i class="ph ph-info"></i>
                    </div>
                    <div class="h-40 w-full bg-gray-50 rounded-xl flex items-center justify-center text-gray-400 text-sm">
                        图表数据加载中...
                    </div>
                </div>
            </div>

            <div id="view-rules" class="view-section hidden p-8 max-w-3xl">
                <h2 class="text-xl font-bold mb-6">提醒</h2>
                
                <div class="space-y-6">
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700">开启提醒</span>
                        <div class="relative inline-block w-10 mr-2 align-middle select-none">
                            <input type="checkbox" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
                            <label class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700">提醒方式</span>
                        <select class="block w-32 pl-3 pr-8 py-1.5 text-sm border-gray-300 bg-gray-100 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500">
                            <option>全屏弹窗</option>
                            <option>通知横幅</option>
                        </select>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <span class="text-sm font-medium text-gray-700">弹窗的提醒内容</span>
                            <span class="badge-pro">PRO</span>
                        </div>
                        <input type="text" value="Take a break" class="text-right text-sm text-gray-500 bg-transparent border-b border-gray-200 focus:border-indigo-500 focus:outline-none w-48">
                    </div>

                    <div class="flex items-start justify-between mt-4">
                        <div class="flex items-center">
                            <span class="text-sm font-medium text-gray-700">全屏弹窗背景</span>
                            <span class="badge-pro">PRO</span>
                        </div>
                        <div class="flex space-x-3">
                            <label class="flex items-center space-x-1 cursor-pointer">
                                <div class="w-5 h-5 rounded-full bg-gray-800 border-2 border-gray-300"></div>
                                <span class="text-xs text-gray-500">跟随系统</span>
                            </label>
                            <label class="flex items-center space-x-1 cursor-pointer">
                                <div class="w-5 h-5 rounded-full bg-white border border-gray-300"></div>
                                <span class="text-xs text-gray-500">浅色</span>
                            </label>
                            <label class="flex items-center space-x-1 cursor-pointer">
                                <div class="w-5 h-5 rounded-full bg-black border border-gray-300"></div>
                                <span class="text-xs text-gray-500">深色</span>
                            </label>
                        </div>
                    </div>
                </div>

                <hr class="my-8 border-gray-200">

                <h2 class="text-xl font-bold mb-6">规则</h2>
                <div class="flex items-center justify-between bg-gray-50 p-4 rounded-lg">
                    <div class="flex items-center">
                        <span class="text-sm font-medium">规则</span>
                        <span class="badge-pro">PRO</span>
                    </div>
                    <div class="text-sm text-gray-600 flex items-center space-x-2">
                        <span>工作</span>
                        <input type="number" value="60" class="w-12 text-center border rounded py-1">
                        <span>分钟后，休息</span>
                        <input type="number" value="5" class="w-12 text-center border rounded py-1">
                        <span>分钟</span>
                    </div>
                </div>
            </div>

            <div id="view-accuracy" class="view-section hidden p-8">
                <h2 class="text-xl font-bold mb-2">准确性</h2>
                <div class="mb-6 flex space-x-4 text-sm">
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="mode" checked class="mr-2 text-indigo-600">
                        <span class="font-medium">智能模式</span>
                    </label>
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="mode" class="mr-2 text-indigo-600">
                        <span class="text-gray-500">愚钝模式</span>
                    </label>
                </div>
                <p class="text-xs text-gray-500 mb-6 leading-relaxed">
                    智能模式可通过以下多种方式自动判断你使用电脑，并增加疲劳值。你可以下方授权 Eye Monitor 监测键盘活动和屏幕变化以提升准确性。推荐使用该模式。
                </p>

                <div class="space-y-4">
                    <div class="flex justify-between items-center py-3 border-b border-gray-100">
                        <span class="text-sm text-gray-700">监测鼠标或触摸板活动</span>
                        <i class="ph ph-check text-indigo-600 text-lg"></i>
                    </div>
                    <div class="flex justify-between items-center py-3 border-b border-gray-100">
                        <span class="text-sm text-gray-700">监测键盘活动</span>
                        <button class="text-xs bg-gray-200 text-gray-600 px-3 py-1 rounded hover:bg-gray-300">取消授权</button>
                    </div>
                    <div class="flex justify-between items-center py-3 border-b border-gray-100">
                        <div class="flex items-center">
                            <span class="text-sm text-gray-700">监测屏幕内容变化</span>
                            <i class="ph ph-question text-gray-400 ml-1"></i>
                        </div>
                        <button class="text-xs bg-gray-200 text-gray-600 px-3 py-1 rounded hover:bg-gray-300">取消授权</button>
                    </div>
                </div>
            </div>

            <div id="view-settings" class="view-section hidden p-8">
                <div class="space-y-6">
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700">显示状态栏图标</span>
                        <div class="relative inline-block w-10 mr-2 align-middle select-none">
                            <input type="checkbox" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
                            <label class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                        </div>
                    </div>
                    
                    <div class="pt-4 border-t border-gray-100">
                        <h3 class="text-sm font-bold text-gray-900 mb-4">快捷键</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">手动开始一次休息</span>
                                <button class="text-xs border border-gray-300 text-gray-500 px-3 py-1 rounded bg-white">设置快捷键</button>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">显示主窗口</span>
                                <button class="text-xs border border-gray-300 text-gray-500 px-3 py-1 rounded bg-white">设置快捷键</button>
                            </div>
                        </div>
                    </div>

                    <div class="pt-8 mt-8 border-t border-gray-200">
                        <div class="bg-purple-50 border border-purple-100 rounded-lg p-4 text-center cursor-pointer hover:bg-purple-100 transition-colors">
                            <span class="text-purple-600 font-bold text-sm">升级到高级版</span>
                        </div>
                    </div>
                </div>
            </div>

        </section>
    </main>

    <script>
        // --- 逻辑部分 ---

        let chartTodayInstance = null;
        let chartAnalysisInstance = null;

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', () => {
            switchTab('today');
        });

        // 切换 Tab 功能
        function switchTab(tabId) {
            // 1. 处理侧边栏样式
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active', 'bg-gray-800', 'text-white');
                el.classList.add('text-gray-700');
                // 重置 Icon 颜色
                const icon = el.querySelector('i');
                if(icon) icon.classList.replace('text-white', 'text-gray-500');
            });
            
            const activeNav = document.getElementById(`nav-${tabId}`);
            if (activeNav) {
                activeNav.classList.add('active');
                activeNav.classList.remove('text-gray-700');
                const icon = activeNav.querySelector('i');
                if(icon) icon.classList.replace('text-gray-500', 'text-white');
            }

            // 2. 切换视图内容
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            
            const viewTarget = document.getElementById(`view-${tabId}`);
            if (viewTarget) {
                viewTarget.classList.remove('hidden');
            }

            // 3. 根据 Tab 初始化特定逻辑（如图表）
            if (tabId === 'today') {
                initTodayChart();
            } else if (tabId === 'analysis') {
                initAnalysisChart();
            }
        }

        // 初始化 "今日" 图表 (Line Chart)
        function initTodayChart() {
            const ctx = document.getElementById('chart-today').getContext('2d');
            
            if (chartTodayInstance) chartTodayInstance.destroy();

            chartTodayInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['0', '2', '4', '6', '8', '10', '12', '14', '16', '18', '20', '22', '24'],
                    datasets: [{
                        label: '疲劳值',
                        data: [0, 0, 0, 0, 0, 0, 0, 0, 10, 40, 95, 0, 0], // 模拟截图中的突增数据
                        borderColor: '#a855f7', // Purple-500
                        backgroundColor: (context) => {
                            const ctx = context.chart.ctx;
                            const gradient = ctx.createLinearGradient(0, 0, 0, 200);
                            gradient.addColorStop(0, 'rgba(168, 85, 247, 0.5)');
                            gradient.addColorStop(1, 'rgba(168, 85, 247, 0)');
                            return gradient;
                        },
                        borderWidth: 2,
                        tension: 0.1, // 稍微平滑一点，但保留折线感
                        fill: true,
                        pointRadius: 0,
                        pointHoverRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { callback: function(value) { return value + "%" } },
                            grid: { borderDash: [4, 4], color: '#f3f4f6' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        // 初始化 "分析" 图表 (Bar Chart)
        function initAnalysisChart() {
            const ctx = document.getElementById('chart-analysis').getContext('2d');

            if (chartAnalysisInstance) chartAnalysisInstance.destroy();

            chartAnalysisInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['12/26 周五', '12/27 周六', '12/28 周日', '12/29 周一', '12/30 周二', '12/31 周三', '1/1 周四', '1/2 周五'],
                    datasets: [{
                        label: '使用时长 (小时)',
                        data: [3.8, 4.0, 4.2, 1.5, 2.2, 2.0, 5.0, 1.2], // 模拟截图数据
                        backgroundColor: '#c084fc', // Purple-400
                        borderRadius: 4,
                        hoverBackgroundColor: '#a855f7'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { borderDash: [4, 4] }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>