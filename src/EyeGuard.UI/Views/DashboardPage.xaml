<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="EyeGuard.UI.Views.DashboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:EyeGuard.UI.Views"
    xmlns:vm="using:EyeGuard.UI.ViewModels"
    xmlns:lvc="using:LiveChartsCore.SkiaSharpView.WinUI"
    xmlns:converters="using:EyeGuard.UI.Converters"
    Background="Transparent">

    <Page.Resources>
        <converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter"/>
        <converters:BoolToChevronConverter x:Key="BoolToChevronConverter"/>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <converters:ShowMoreTextConverter x:Key="ShowMoreTextConverter"/>
    </Page.Resources>

    <ScrollViewer Padding="32">
        <StackPanel Spacing="24">
            
            <!-- æµ‹è¯•æŽ§åˆ¶æŒ‰é’® -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1" CornerRadius="8" Padding="16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel>
                        <TextBlock Text="ðŸ§ª æµ‹è¯•æ¨¡å¼" FontWeight="SemiBold"/>
                        <TextBlock Text="ç‚¹å‡»å¼€å§‹ç›‘æµ‹å¯åŠ¨çœŸå®žè¾“å…¥æ£€æµ‹" 
                                   FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12">
                        <Button x:Name="StartButton" Content="å¼€å§‹ç›‘æµ‹" Click="StartButton_Click" Style="{StaticResource AccentButtonStyle}"/>
                        <Button Content="é‡ç½®" Click="ResetButton_Click"/>
                        <Button Content="æµ‹è¯•å¼¹çª—" Click="TestOverlayButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡åŒº - ä¸€è¡Œå››ä¸ª -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ç–²åŠ³å€¼å¡ç‰‡ -->
                <Border Grid.Column="0"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1" CornerRadius="8" Padding="20"
                        Margin="0,0,8,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="4">
                            <TextBlock Text="ç–²åŠ³å€¼" 
                                       FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <FontIcon Glyph="&#xE946;" FontSize="12" 
                                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                            <TextBlock Text="{x:Bind ViewModel.FatigueValue, Mode=OneWay}" 
                                       FontSize="32" FontWeight="Bold"/>
                            <TextBlock Text="%" 
                                       FontSize="14" VerticalAlignment="Bottom"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                       Margin="2,0,0,4"/>
                        </StackPanel>
                        <ProgressBar Value="{x:Bind ViewModel.FatigueValue, Mode=OneWay}" Maximum="100"
                                     Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- ä»Šæ—¥æ—¶é•¿å¡ç‰‡ -->
                <Border Grid.Column="1"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1" CornerRadius="8" Padding="20"
                        Margin="8,0,8,0">
                    <StackPanel>
                        <TextBlock Text="ä»Šæ—¥æ—¶é•¿" 
                                   FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                            <TextBlock Text="{x:Bind ViewModel.TodayHours, Mode=OneWay}" 
                                       FontSize="32" FontWeight="Bold"/>
                            <TextBlock Text="å°æ—¶" 
                                       FontSize="14" VerticalAlignment="Bottom"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                       Margin="2,0,0,4"/>
                            <TextBlock Text="{x:Bind ViewModel.TodayMinutes, Mode=OneWay}" 
                                       FontSize="32" FontWeight="Bold"
                                       Margin="8,0,0,0"/>
                            <TextBlock Text="åˆ†" 
                                       FontSize="14" VerticalAlignment="Bottom"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                       Margin="2,0,0,4"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- ç²¾åŠ›å€’è®¡æ—¶å¡ç‰‡ (Limit 2.0) -->
                <Border Grid.Column="2"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1" CornerRadius="8" Padding="20"
                        Margin="8,0,8,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="6">
                            <TextBlock Text="âš¡" FontSize="12"/>
                            <TextBlock Text="ç²¾åŠ›é¢„æµ‹" 
                                       FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                        <TextBlock Text="{x:Bind ViewModel.BurnoutCountdownText, Mode=OneWay}" 
                                   FontSize="24" FontWeight="Bold"
                                   Margin="0,8,0,0"/>
                        <TextBlock Text="{x:Bind ViewModel.BurnoutCountdownSubtitle, Mode=OneWay}" 
                                   FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </Border>

                <!-- æœ€é•¿è¿žç»­å·¥ä½œæ—¶é—´å¡ç‰‡ -->
                <Border Grid.Column="3"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1" CornerRadius="8" Padding="20"
                        Margin="8,0,0,0">
                    <StackPanel>
                        <TextBlock Text="ä»Šæ—¥æœ€é•¿è¿žç»­" 
                                   FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                            <TextBlock Text="{x:Bind ViewModel.LongestSessionMinutes, Mode=OneWay}" 
                                       FontSize="32" FontWeight="Bold"/>
                            <TextBlock Text="åˆ†é’Ÿ" 
                                       FontSize="14" VerticalAlignment="Bottom"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                       Margin="2,0,0,4"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
            
            <!-- é˜¶æ®µ 5: å¹²é¢„æé†’å¡ç‰‡ - åªåœ¨éœ€è¦å¹²é¢„æ—¶æ˜¾ç¤º -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{x:Bind ViewModel.InterventionBorderColor, Mode=OneWay}"
                    BorderThickness="2" CornerRadius="8" Padding="20"
                    Visibility="{x:Bind ViewModel.ShowInterventionCard, Mode=OneWay}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel>
                        <TextBlock Text="{x:Bind ViewModel.InterventionMessage, Mode=OneWay}" 
                                   FontSize="14" FontWeight="SemiBold"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                    
                    <Button Grid.Column="1" 
                            Content="ä¼‘æ¯ä¸€ä¸‹" 
                            Style="{StaticResource AccentButtonStyle}"
                            Click="InterventionActionButton_Click"/>
                </Grid>
            </Border>
            
            <!-- ç²¾åŠ›é¢„æµ‹å»ºè®®å¡ç‰‡ (Limit 2.0) - åªåœ¨æœ‰å»ºè®®æ—¶æ˜¾ç¤º -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="#8A2BE2"
                    BorderThickness="2" CornerRadius="8" Padding="20"
                    Visibility="{x:Bind ViewModel.HasExtensionSuggestion, Mode=OneWay}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ’¡" FontSize="16"/>
                            <TextBlock Text="å»¶é•¿ç²¾åŠ›å»ºè®®" FontWeight="SemiBold"/>
                        </StackPanel>
                        <TextBlock Text="{x:Bind ViewModel.ExtensionSuggestion, Mode=OneWay}" 
                                   Margin="0,8,0,0"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- ä¼‘æ¯ä»»åŠ¡å¡ç‰‡ (Limit 2.0) - åªåœ¨æœ‰ä»»åŠ¡æ—¶æ˜¾ç¤º -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="#FF6D00"
                    BorderThickness="2" CornerRadius="8" Padding="20"
                    Visibility="{x:Bind ViewModel.HasBreakTask, Mode=OneWay}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel>
                        <TextBlock Text="{x:Bind ViewModel.BreakTaskName, Mode=OneWay}" 
                                   FontSize="16" FontWeight="SemiBold"/>
                        <TextBlock Text="{x:Bind ViewModel.BreakTaskDescription, Mode=OneWay}" 
                                   Margin="0,4,0,0"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBlock Text="{x:Bind ViewModel.BreakTaskReason, Mode=OneWay}" 
                                   FontSize="12" Margin="0,8,0,0"
                                   Foreground="{ThemeResource TextFillColorTertiaryBrush}"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                        <Button Content="å·²å®Œæˆ" Command="{x:Bind ViewModel.CompleteBreakTaskCommand}" Style="{StaticResource AccentButtonStyle}"/>
                        <Button Content="å¿½ç•¥" Command="{x:Bind ViewModel.SkipBreakTaskCommand}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ä»Šæ—¥ä½¿ç”¨å›¾è¡¨åŒº -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1" CornerRadius="8" Padding="24">
                <StackPanel>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="ä»Šæ—¥ä½¿ç”¨" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,16"/>
                        <Button Grid.Column="1" Content="åˆ·æ–°" Command="{x:Bind ViewModel.StartSimulationCommand}" Visibility="Collapsed"/>
                    </Grid>
                    
                    <!-- åº”ç”¨ä½¿ç”¨åˆ—è¡¨ - æ ‘å½¢ç»“æž„ -->
                    <ItemsControl ItemsSource="{x:Bind ViewModel.DisplayedApps, Mode=OneWay}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,4">
                                    <!-- é¡¶çº§åº”ç”¨é¡¹ -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="24"/>
                                            <ColumnDefinition Width="24"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- å±•å¼€/æŠ˜å æŒ‰é’®ï¼ˆä»…æµè§ˆå™¨æ˜¾ç¤ºï¼‰ -->
                                        <Button Grid.Column="0" Width="20" Height="20" Padding="0"
                                                Background="Transparent" BorderThickness="0"
                                                Click="ToggleExpand_Click"
                                                Visibility="{Binding HasChildren, Converter={StaticResource BoolToVisibilityConverter}}">
                                            <FontIcon FontSize="12" Glyph="{Binding IsExpanded, Converter={StaticResource BoolToChevronConverter}}"/>
                                        </Button>
                                        
                                        <FontIcon Grid.Column="1" Glyph="{Binding IconGlyph}" FontSize="20" 
                                                  Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                        
                                        <StackPanel Grid.Column="2" Margin="8,0">
                                            <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                                            <ProgressBar Value="{Binding Percentage}" Maximum="100" Margin="0,4,0,0" Height="4"/>
                                        </StackPanel>
                                        
                                        <TextBlock Grid.Column="3" Text="{Binding DurationText}" 
                                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                   VerticalAlignment="Center"/>
                                    </Grid>
                                    
                                    <!-- å­é¡¹ï¼ˆç½‘ç«™åˆ—è¡¨ï¼‰- ç»‘å®šåˆ°IsBrowserçš„å±•å¼€çŠ¶æ€ -->
                                    <ItemsControl ItemsSource="{Binding Children}" Margin="40,4,0,0"
                                                  Visibility="{Binding IsExpanded, Converter={StaticResource BoolToVisibilityConverter}}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Margin="0,2">
                                                    <!-- ç½‘ç«™é¡¹ -->
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="20"/>
                                                            <ColumnDefinition Width="24"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        
                                                        <!-- å±•å¼€/æŠ˜å æŒ‰é’® -->
                                                        <Button Grid.Column="0" Width="16" Height="16" Padding="0"
                                                                Background="Transparent" BorderThickness="0"
                                                                Click="ToggleExpand_Click"
                                                                Visibility="{Binding HasChildren, Converter={StaticResource BoolToVisibilityConverter}}">
                                                            <FontIcon FontSize="10" Glyph="{Binding IsExpanded, Converter={StaticResource BoolToChevronConverter}}"/>
                                                        </Button>
                                                        
                                                        <FontIcon Grid.Column="1" Glyph="{Binding IconGlyph}" FontSize="16" 
                                                                  Foreground="{ThemeResource TextFillColorTertiaryBrush}"/>
                                                        
                                                        <StackPanel Grid.Column="2" Margin="8,0">
                                                            <TextBlock Text="{Binding Name}" FontSize="14"/>
                                                            <ProgressBar Value="{Binding Percentage}" Maximum="100" 
                                                                         Margin="0,2,0,0" Height="3" Opacity="0.6"/>
                                                        </StackPanel>
                                                        
                                                        <TextBlock Grid.Column="3" Text="{Binding DurationText}" 
                                                                   FontSize="14"
                                                                   Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                                                   VerticalAlignment="Center"/>
                                                    </Grid>
                                                    
                                                    <!-- ç¬¬ä¸‰å±‚ï¼šé¡µé¢æ ‡é¢˜åˆ—è¡¨ - æœ‰æŠ˜å åŠŸèƒ½ -->
                                                    <ItemsControl ItemsSource="{Binding Children}" Margin="36,2,0,0"
                                                                  Visibility="{Binding IsExpanded, Converter={StaticResource BoolToVisibilityConverter}}">
                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Grid Margin="0,2">
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="16"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    
                                                                    <FontIcon Glyph="{Binding IconGlyph}" FontSize="12" 
                                                                              Foreground="{ThemeResource TextFillColorTertiaryBrush}"/>
                                                                    
                                                                    <TextBlock Grid.Column="1" Text="{Binding Name}" 
                                                                               FontSize="12" Margin="6,0"
                                                                               TextTrimming="CharacterEllipsis"/>
                                                                    
                                                                    <TextBlock Grid.Column="2" Text="{Binding DurationText}" 
                                                                               FontSize="12"
                                                                               Foreground="{ThemeResource TextFillColorTertiaryBrush}"/>
                                                                </Grid>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    
                    <!-- å±•å¼€/æ”¶èµ·åˆ†å‰²çº¿ -->
                    <Grid Visibility="{x:Bind ViewModel.HasMoreApps, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"
                          Margin="0,12,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- å·¦ä¾§åˆ†å‰²çº¿ -->
                        <Rectangle Grid.Column="0" Height="1" Fill="{ThemeResource DividerStrokeColorDefaultBrush}" 
                                   VerticalAlignment="Center" Margin="0,0,12,0"/>
                        
                        <!-- ä¸­é—´æŒ‰é’® -->
                        <Button Grid.Column="1" 
                                Command="{x:Bind ViewModel.ToggleShowAllAppsCommand}"
                                Background="Transparent" 
                                BorderThickness="0"
                                Padding="16,6">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <FontIcon Glyph="{x:Bind ViewModel.ShowAllApps, Mode=OneWay, Converter={StaticResource BoolToChevronConverter}}" 
                                          FontSize="10"
                                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock Text="{x:Bind ViewModel.ShowAllApps, Mode=OneWay, Converter={StaticResource ShowMoreTextConverter}}"
                                           FontSize="12"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            </StackPanel>
                        </Button>
                        
                        <!-- å³ä¾§åˆ†å‰²çº¿ -->
                        <Rectangle Grid.Column="2" Height="1" Fill="{ThemeResource DividerStrokeColorDefaultBrush}" 
                                   VerticalAlignment="Center" Margin="12,0,0,0"/>
                    </Grid>
                </StackPanel>
            </Border>
            
            <!-- ç–²åŠ³åº¦è¶‹åŠ¿å›¾ - ç‹¬ç«‹é¢æ¿ -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1" CornerRadius="8" Padding="24">
                <StackPanel>
                    <TextBlock Text="ç–²åŠ³åº¦è¶‹åŠ¿" 
                               FontSize="20" FontWeight="SemiBold"
                               Margin="0,0,0,16"/>
                    
                    <Border Height="240" 
                            CornerRadius="8"
                            Padding="0,0,0,16"
                            Background="{ThemeResource LayerFillColorDefaultBrush}">
                        <lvc:CartesianChart Series="{x:Bind ViewModel.Series, Mode=OneWay}"
                                            XAxes="{x:Bind ViewModel.XAxes, Mode=OneWay}"
                                            YAxes="{x:Bind ViewModel.YAxes, Mode=OneWay}"
                                            TooltipPosition="Top"
                                            TooltipTextPaint="{x:Bind ViewModel.LegendPaint}">
                        </lvc:CartesianChart>
                    </Border>
                </StackPanel>
            </Border>
            
            <!-- å½“å‰çŠ¶æ€æŒ‡ç¤ºå™¨ -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1" CornerRadius="8" Padding="24">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <Ellipse x:Name="StatusIndicator"
                             Width="12" Height="12"
                             Fill="Gray"
                             Margin="0,0,12,0"/>
                    
                    <StackPanel Grid.Column="1">
                        <TextBlock Text="{x:Bind ViewModel.StatusText, Mode=OneWay}"/>
                        <TextBlock Text="{x:Bind ViewModel.CurrentAppText, Mode=OneWay}" 
                                   FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ðŸ”§ å¼€å‘è€…è°ƒè¯•é¢æ¿ (DEV_MODE) -->
            <Border Background="#1A8A2BE2"
                    BorderBrush="#8A2BE2"
                    BorderThickness="2" CornerRadius="8" Padding="16"
                    Visibility="{x:Bind ViewModel.IsDevMode, Mode=OneWay}">
                <StackPanel Spacing="8">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="ðŸ”§ å¼€å‘è€…è°ƒè¯•é¢æ¿" FontWeight="Bold" Foreground="#8A2BE2"/>
                        <TextBlock Text="(ä»…åœ¨å¼€å‘æ¨¡å¼æ˜¾ç¤º)" FontSize="11" Foreground="Gray"/>
                    </StackPanel>
                    
                    <Grid ColumnSpacing="24" RowSpacing="4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        
                        <!-- å·¦åˆ— -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="ç”¨æˆ·çŠ¶æ€:" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" Text="{x:Bind ViewModel.UserState, Mode=OneWay}" FontSize="12" FontWeight="SemiBold"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="ç–²åŠ³ç­‰çº§:" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{x:Bind ViewModel.FatigueLevel, Mode=OneWay}" FontSize="12"/>
                        
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="ç–²åŠ³å€¼(ç²¾ç¡®):" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Text="{x:Bind ViewModel.FatiguePrecise, Mode=OneWay}" FontSize="12"/>
                        
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="ç©ºé—²ç§’æ•°:" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="3" Grid.Column="1" Text="{x:Bind ViewModel.IdleSecondsText, Mode=OneWay}" FontSize="12"/>
                        
                        <TextBlock Grid.Row="4" Grid.Column="0" Text="ç–²åŠ³æ–œçŽ‡:" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="4" Grid.Column="1" Text="{x:Bind ViewModel.FatigueSlopeText, Mode=OneWay}" FontSize="12" Foreground="#8A2BE2"/>
                        
                        <!-- å³åˆ— -->
                        <TextBlock Grid.Row="0" Grid.Column="2" Text="éŸ³é¢‘æ’­æ”¾:" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="0" Grid.Column="3" Text="{x:Bind ViewModel.IsAudioPlayingText, Mode=OneWay}" FontSize="12"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="2" Text="ä¸‹æ¬¡ä¼‘æ¯:" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="1" Grid.Column="3" Text="{x:Bind ViewModel.NextBreakPrecise, Mode=OneWay}" FontSize="12"/>
                        
                        <TextBlock Grid.Row="2" Grid.Column="2" Text="è¿žç»­å·¥ä½œ:" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="2" Grid.Column="3" Text="{x:Bind ViewModel.CurrentSessionText, Mode=OneWay}" FontSize="12"/>
                        
                        <TextBlock Grid.Row="3" Grid.Column="2" Text="ä¸Šä¸‹æ–‡:" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="3" Grid.Column="3" Text="{x:Bind ViewModel.CurrentContextName, Mode=OneWay}" FontSize="12" Foreground="#8A2BE2"/>
                        
                        <TextBlock Grid.Row="4" Grid.Column="2" Text="ä¼‘æ¯å»ºè®®:" FontSize="12" Foreground="Gray"/>
                        <TextBlock Grid.Row="4" Grid.Column="3" Text="{x:Bind ViewModel.BreakSuggestion, Mode=OneWay}" FontSize="12" Foreground="#8A2BE2"/>
                    </Grid>
                    
                    <!-- è°ƒè¯•ç”¨ç–²åŠ³å€¼æ»‘å— -->
                    <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,12,0,0">
                        <TextBlock Text="æ‰‹åŠ¨è®¾ç½®ç–²åŠ³å€¼:" FontSize="12" Foreground="Gray" VerticalAlignment="Center"/>
                        <Slider x:Name="DebugFatigueSlider" 
                                Width="200" 
                                Minimum="0" Maximum="100" 
                                Value="{x:Bind ViewModel.FatigueValue, Mode=OneWay}"
                                ValueChanged="DebugFatigueSlider_ValueChanged"/>
                        <TextBlock Text="{x:Bind ViewModel.FatigueValue, Mode=OneWay}" 
                                   FontSize="12" FontWeight="SemiBold" VerticalAlignment="Center"/>
                        <TextBlock Text="%" FontSize="12" Foreground="Gray" VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</Page>
